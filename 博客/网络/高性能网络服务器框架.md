# framework
- 三个模块
  - I/O处理单元
  - 逻辑单元
  - 存储单元

# 服务器模型
## C/S模型
- 模型
  - 所有客户端都通过访问服务器来获取所需的资源
![](https://raw.githubusercontent.com/Daz-3ux-Img/Img-hosting/master/202207181701926.png)

- 配合I/O多路复用
  - 想要性能高就需要使用某种`I/O模型`(select/epoll)来监听服务器上的事件
  - 使用I/O模型的目的是可以处理大量I/O事件以及为其分配逻辑单元

- 优缺点
  - 适合于资源相对集中的场景,实现简单
  - 服务器是唯一通信中心,访问量过大可能会导致所有客户端都不能及时得到相应

## P2P模型
- 模型
  - peer to peer, 点对点
  - 不再以服务器为中心,网络上所有主机都处于对等地位(C/S模型的扩展)
![](https://raw.githubusercontent.com/Daz-3ux-Img/Img-hosting/master/202207181712198.png)

- 优
  - 资源可以充分,自由共享

- 缺
  - 大规模传输时网络负载压力大
  - 主机之间很难互相发现(P2P为此设立了一个专门的发现服务器)


# 服务器编程框架
- 服务器的基本框架都一样,不同之处在于`逻辑单元`
- 基本框架:
![](https://raw.githubusercontent.com/Daz-3ux-Img/Img-hosting/master/202207181717667.png)

  - `I/O处理单元`:服务器管理客户连接模块
  - `逻辑单元`:分析并处理客户数据
  - `网络存储单元`:数据库,缓存,文件
  - `请求队列`:各单元之间通信方式的抽象(比如线程池)

# I/O模型
- 同步I/O
  - 阻塞I/O
  - I/O复用
    - I/O复用本身是`阻塞`的,其高效率来自于其可以同时监听多个I/O事件
  - SIGIO信号
- 异步I/O

# 两种高效的事件处理模式
- 服务器通常处理三类事件:
  - I/O事件
  - 信号
  - 定时事件

- 事件处理模式
  - Reactor
  - Proactor

# Reactor
- 要求主线程(也就是I/O处理单元)之负责`监听文件描述符`上的事件,有的话立即通知工作线程(逻辑单元),除此之外不做其他实质性的工作

