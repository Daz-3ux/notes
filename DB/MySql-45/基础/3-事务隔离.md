- 事务
  - MySQL 的事务在`引擎层`支持
    - 自带的 MyISAM 不支持事务,是被 InnoDB 取代的重要原因
  - ACID
    - Atomicity Consistency Isolation Durability
    - 原子性, 一致性, 隔离性, 持久性

- 隔离性和隔离级别
  - 数据库上有多个事务同时执行的时候,可能出现的问题:
    - `脏读`: dirty read, 一个事务读取了另外一个事务未提交的数据
    - `不可重复读`: non-repeated read, 一个事务多次读取同一数据,但两次读取之间,另一个事务修改或删除了数据,导致第一次和第二次读取的结果不同
    - `幻读`: phantom read: 一个事务多次执行同一查询,但在两次查询之间,另一个事务插入了符合查询条件的新数据,导致第一次和第二次查询的结果不同
  - 为了解决以上问题,有了`隔离级别`:
    - 读未提交: 一个事务还未提交,其变更就可以被其他事务看见
    - 读提交:一个事务提交后,其变更才会被其他事务看见
    - 可重复读:一个事务执行中看到的数据,总是跟这个事务在启动时看到的数据是一致的.在可重复读中,未提交的变更对其他事务也是不可见的
    - 串行化:对于同一行记录,写会加`写锁`,读会加`读锁`,当出现读写所冲突时,后访问的事务必须等前一个事务执行完成,才能继续执行
  - 设置读提交:
    - 将启动参数 `transaction-isolation` 配置为 `READ-COMMITTED`

- 事务隔离的实现
  - 依靠回滚日记
  - 尽量不要使用长事务
    - 影响回滚段,占用锁资源,甚至拖垮整个库

- 事务的启动方式
  - 使用 `set autocommit = 1`手动启动自动提交,避免意外导致长事务
    - 如果考虑多一次交互问题，可以使用 commit work and chain 语法: 提交事务并自动启动下一个事务

